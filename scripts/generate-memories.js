import fs from 'fs';
import path from 'path';

const MEMORIES_DIR = 'public/memories';
const OUTPUT_FILE = 'src/data/generatedMemories.ts';

// Ensure directory exists
if (!fs.existsSync(MEMORIES_DIR)) {
    fs.mkdirSync(MEMORIES_DIR, { recursive: true });
    console.log(`Created ${MEMORIES_DIR} directory.`);
}

// Get all image files
const files = fs.readdirSync(MEMORIES_DIR)
    .filter(file => /\.(jpg|jpeg|png|gif|webp)$/i.test(file));

const memories = files.map((file, index) => ({
    id: index,
    image: `/memories/${file}`,
    caption: "A beautiful memory", // Default caption, can be customized if file naming convention specific
    date: "2025"
}));

const content = `// This file is auto-generated by scripts/generate-memories.js
// Do not edit manually if you plan to run the script again.

export const generatedMemories = ${JSON.stringify(memories, null, 2)};
`;

fs.writeFileSync(OUTPUT_FILE, content);

console.log(`Successfully generated ${memories.length} memories in ${OUTPUT_FILE}`);
